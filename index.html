<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nakshatra Vidhi - Vedic Astrology Generator</title>
    <meta name="description" content="Free Vedic Astrology Chart Generator - Complete Hindu Horoscope with Divisional Charts and Professional PDF Reports">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Roboto', sans-serif; background: linear-gradient(135deg,#667eea,#764ba2); color: #333; }
        .container { max-width:1200px; margin:0 auto; padding:20px; }
        .header { text-align:center; color:white; margin-bottom:30px; }
        .header h1 { font-family:'Roboto Condensed',sans-serif; font-size:3.5em; text-shadow:2px 2px 4px rgba(0,0,0,0.3); }
        .header p { font-size:1.2em; font-weight:300; opacity:0.9; }
        .form-container { background:white; border-radius:20px; padding:40px; box-shadow:0 20px 40px rgba(0,0,0,0.1); margin-bottom:30px; }
        .error-message { background:#fee; border:1px solid #e74c3c; color:#c0392b; padding:15px; border-radius:10px; display:none; margin-bottom:20px; }
        .error-message h4 { margin-bottom:10px; }
        .error-message ul { margin-left:20px; }
        .form-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:30px; margin-bottom:30px; }
        .form-section { background:#f8f9fa; padding:25px; border-radius:15px; border-left:5px solid #667eea; }
        .form-section h3 { color:#667eea; margin-bottom:20px; font-size:1.4em; font-weight:500; display:flex; align-items:center; gap:10px; }
        .form-group { margin-bottom:20px; }
        .form-group label { display:block; margin-bottom:8px; font-weight:500; }
        .form-group input, .form-group select { width:100%; padding:12px 15px; border:2px solid #e1e5e9; border-radius:10px; font-size:16px; transition:border-color .3s ease; }
        .form-group input.error, .form-group select.error { border-color:#e74c3c; animation:shake .5s; }
        @keyframes shake { 0%,100% {transform:translateX(0);} 25% {transform:translateX(-5px);} 75% {transform:translateX(5px);} }
        .required { color:#e74c3c; }
        .generate-btn { background:linear-gradient(135deg,#667eea,#764ba2); color:white; border:none; padding:18px 40px; font-size:1.2em; border-radius:50px; cursor:pointer; font-weight:500; }
        .generate-btn:disabled { background:#95a5a6; cursor:not-allowed; }
        .loading { text-align:center; padding:40px; display:none; }
        .loading-spinner { width:50px; height:50px; border:4px solid #f3f3f3; border-top:4px solid #667eea; border-radius:50%; animation:spin 1s linear infinite; margin:0 auto 20px; }
        @keyframes spin { 0%{transform:rotate(0);}100%{transform:rotate(360deg);} }
        .results { background:white; border-radius:20px; padding:40px; box-shadow:0 20px 40px rgba(0,0,0,0.1); margin-top:30px; display:none; }
        .input-summary { background:#f0f4ff; border:1px solid #667eea; border-radius:15px; padding:25px; margin-bottom:30px; }
        .input-summary h3 { color:#667eea; margin-bottom:15px; font-weight:500; }
        .summary-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:15px; }
        .summary-item { display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #e1e5e9; }
        .summary-item:last-child { border-bottom:none; }
        .summary-label { font-weight:500; color:#555; }
        .summary-value { color:#333; }
        .chart-info { background:#f8f9fa; padding:20px; border-radius:10px; border-left:4px solid #667eea; margin-bottom:30px; }
        .charts-container { display:grid; grid-template-columns:repeat(auto-fit,minmax(350px,1fr)); gap:30px; margin:30px 0; }
        .chart-container { background:#f8f9fa; padding:30px; border-radius:15px; border-left:5px solid #667eea; text-align:center; }
        .chart-container h4 { color:#667eea; margin-bottom:15px; font-size:1.2em; font-weight:500; }
        .chart-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:2px; max-width:300px; margin:20px auto; background:#333; }
        .chart-house { background:white; padding:12px 5px; font-size:11px; font-weight:500; min-height:55px; display:flex; flex-direction:column; justify-content:center; align-items:center; border:1px solid #ddd; }
        .house-number { font-size:9px; color:#666; margin-bottom:3px; }
        .planet { background:#667eea; color:white; padding:2px 4px; border-radius:3px; font-size:7px; margin:1px; font-weight:400; }
        .prediction-section { background:#f8f9fa; margin:15px 0; padding:25px; border-left:4px solid #667eea; }
        .prediction-section h4 { color:#667eea; margin-bottom:15px; font-weight:500; }
        .prediction-subsection { margin:15px 0; padding:15px; background:white; border-left:3px solid #95a5a6; border-radius:8px; }
        .prediction-subsection h5 { font-size:1.1em; font-weight:500; margin-bottom:10px; color:#2c3e50; }
        .download-btn { background:#27ae60; color:white; border:none; padding:15px 30px; font-size:1.1em; border-radius:25px; cursor:pointer; margin:20px 10px; transition:background .3s ease; font-weight:500; }
        .download-btn:hover { background:#219a52; }
        @media(max-width:768px){
            .form-grid, .summary-grid, .charts-container { grid-template-columns:1fr; }
            .header h1{font-size:2.5em;}
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåü Nakshatra Vidhi üåü</h1>
            <p>Complete Vedic Astrology Chart Generator</p>
        </div>
        <div class="form-container">
            <div class="error-message" id="errorMessage">
                <h4>‚ö†Ô∏è Please complete required fields:</h4>
                <ul id="errorList"></ul>
            </div>
            <form id="horoscopeForm">
                <div class="form-grid">
                    <div class="form-section">
                        <h3>üìÖ Basic Birth Information</h3>
                        <div class="form-group">
                            <label for="fullName">Full Name <span class="required">*</span></label>
                            <input type="text" id="fullName" name="fullName" placeholder="Enter your full name">
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender <span class="required">*</span></label>
                            <select id="gender" name="gender">
                                <option value="">Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="birthDate">Date of Birth <span class="required">*</span></label>
                            <input type="date" id="birthDate" name="birthDate">
                        </div>
                        <div class="form-group">
                            <label for="birthTime">Time of Birth <span class="required">*</span></label>
                            <input type="time" id="birthTime" name="birthTime">
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>üìç Birth Location</h3>
                        <div class="form-group">
                            <label for="birthPlace">Birth Place <span class="required">*</span></label>
                            <input type="text" id="birthPlace" name="birthPlace" placeholder="City, State, Country">
                        </div>
                        <div class="form-group">
                            <label for="latitude">Latitude <span class="required">*</span></label>
                            <input type="number" id="latitude" name="latitude" step="0.0001" placeholder="e.g., 28.6139">
                        </div>
                        <div class="form-group">
                            <label for="longitude">Longitude <span class="required">*</span></label>
                            <input type="number" id="longitude" name="longitude" step="0.0001" placeholder="e.g., 77.2090">
                        </div>
                        <div class="form-group">
                            <label for="timezone">Timezone <span class="required">*</span></label>
                            <select id="timezone" name="timezone">
                                <option value="">Select Timezone</option>
                                <option value="5.5">IST (GMT+5:30)</option>
                                <option value="0">GMT (GMT+0:00)</option>
                                <option value="-5">EST (GMT-5:00)</option>
                                <option value="-8">PST (GMT-8:00)</option>
                                <option value="1">CET (GMT+1:00)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>üèõÔ∏è Regional Preferences</h3>
                        <div class="form-group">
                            <label for="chartStyle">Chart Style <span class="required">*</span></label>
                            <select id="chartStyle" name="chartStyle">
                                <option value="">Select Chart Style</option>
                                <option value="north">North Indian</option>
                                <option value="south">South Indian</option>
                                <option value="east">East Indian</option>
                            </select>
                        </div>
                        <div class="form-group" id="languageGroup" style="display:none;">
                            <label for="language">Language <span class="required">*</span></label>
                            <select id="language" name="language">
                                <option value="">Select Language</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ayanamsa">Ayanamsa</label>
                            <select id="ayanamsa" name="ayanamsa">
                                <option value="lahiri">Lahiri</option>
                                <option value="raman">Raman</option>
                                <option value="krishnamurti">KP</option>
                                <option value="yukteshwar">Yukteshwar</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="calendarSystem">Calendar System</label>
                            <select id="calendarSystem" name="calendarSystem">
                                <option value="lunar">Lunar</option>
                                <option value="solar">Solar</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>üìä Output Options</h3>
                        <div class="form-group">
                            <label for="reportType">Report Detail Level</label>
                            <select id="reportType" name="reportType">
                                <option value="basic">Basic</option>
                                <option value="detailed">Detailed</option>
                                <option value="comprehensive">Comprehensive</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="includeDivisional">Divisional Charts</label>
                            <select id="includeDivisional" name="includeDivisional">
                                <option value="basic">D1 Only</option>
                                <option value="essential">D1+D9</option>
                                <option value="extended">D1+D9+D10+D12</option>
                                <option value="complete">All Major</option>
                            </select>
                        </div>
                    </div>
                </div>
                <button type="submit" class="generate-btn" id="generateBtn">‚ú® Generate Horoscope ‚ú®</button>
            </form>
        </div>
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <h3>Calculating Charts...</h3>
        </div>
        <div class="results" id="results">
            <h2>üåü Your Complete Nakshatra Vidhi Report üåü</h2>
            <div class="input-summary" id="inputSummary"></div>
            <div class="chart-info">
                <h3>Basic Astrological Information</h3>
                <p><strong>Ascendant:</strong> <span id="ascendant">-</span></p>
                <p><strong>Moon Sign:</strong> <span id="moonSign">-</span></p>
                <p><strong>Sun Sign:</strong> <span id="sunSign">-</span></p>
                <p><strong>Nakshatra:</strong> <span id="nakshatra">-</span></p>
                <p><strong>Pada:</strong> <span id="pada">-</span></p>
            </div>
            <div class="charts-container" id="chartsContainer"></div>
            <div class="predictions" id="predictions"></div>
            <div style="text-align:center;margin-top:30px;">
                <button class="download-btn" onclick="downloadPDF()">üìÑ Download PDF</button>
                <button class="download-btn" onclick="generateNewHoroscope()" style="background:#3498db;">üîÑ New Horoscope</button>
            </div>
        </div>
    </div>

    <script>
        const languageOptions = {
            north:[{value:'hindi',text:'Hindi'},{value:'punjabi',text:'Punjabi'},{value:'english',text:'English'}],
            south:[{value:'tamil',text:'Tamil'},{value:'telugu',text:'Telugu'},{value:'english',text:'English'}],
            east:[{value:'bengali',text:'Bengali'},{value:'odia',text:'Odia'},{value:'english',text:'English'}]
        };
        const zodiacSigns = {1:{name:'Aries',sanskrit:'Mesha'},2:{name:'Taurus',sanskrit:'Vrishabha'},3:{name:'Gemini',sanskrit:'Mithuna'},4:{name:'Cancer',sanskrit:'Karka'},5:{name:'Leo',sanskrit:'Simha'},6:{name:'Virgo',sanskrit:'Kanya'},7:{name:'Libra',sanskrit:'Tula'},8:{name:'Scorpio',sanskrit:'Vrishchika'},9:{name:'Sagittarius',sanskrit:'Dhanu'},10:{name:'Capricorn',sanskrit:'Makara'},11:{name:'Aquarius',sanskrit:'Kumbha'},12:{name:'Pisces',sanskrit:'Meena'}};
        const planets={sun:{},moon:{},mars:{},mercury:{},jupiter:{},venus:{},saturn:{},rahu:{},ketu:{}};
        const nakshatras=['Ashwini','Bharani','Krittika','Rohini','Mrigashira','Ardra','Punarvasu','Pushya','Ashlesha','Magha','Purva Phalguni','Uttara Phalguni','Hasta','Chitra','Swati','Vishakha','Anuradha','Jyeshtha','Mula','Purva Ashadha','Uttara Ashadha','Shravana','Dhanishta','Shatabhisha','Purva Bhadrapada','Uttara Bhadrapada','Revati'];
        const divisionalCharts={'D1':{name:'Rasi Chart',description:'Birth Chart'},'D9':{name:'Navamsa',description:'Marriage'},'D10':{name:'Dasamsa',description:'Career'},'D12':{name:'Dwadasamsa',description:'Parents'}};
        let horoscopeData={};
        document.addEventListener('DOMContentLoaded',()=>{
            setupEventListeners();
        });
        function setupEventListeners(){
            document.getElementById('chartStyle').addEventListener('change',function(){
                const opts=languageOptions[this.value]||[];
                const sel=document.getElementById('language');
                sel.innerHTML='<option value=\'\'>Select Language</option>'+opts.map(o=>`<option value="${o.value}">${o.text}</option>`).join('');
                document.getElementById('languageGroup').style.display=opts.length?'block':'none';
            });
            document.getElementById('horoscopeForm').addEventListener('submit',e=>{e.preventDefault();generateHoroscope();});
            document.getElementById('birthPlace').addEventListener('change',function(){
                const coords={'delhi':{lat:28.6139,lng:77.2090},'mumbai':{lat:19.076,lng:72.8777}};Object.keys(coords).forEach(c=>{if(this.value.toLowerCase().includes(c)){document.getElementById('latitude').value=coords[c].lat;document.getElementById('longitude').value=coords[c].lng;document.getElementById('timezone').value='5.5';}});
            });
        }
        function validateForm(data){
            const fields=['fullName','gender','birthDate','birthTime','birthPlace','latitude','longitude','timezone','chartStyle'];
            if(data.chartStyle)fields.push('language');
            let missing=[];document.querySelectorAll('.error').forEach(el=>el.classList.remove('error'));
            fields.forEach(f=>{if(!data[f]||!data[f].trim()){missing.push(f);document.getElementById(f).classList.add('error');}});
            if(missing.length){document.getElementById('errorList').innerHTML=missing.map(f=>`<li>${f}</li>`).join('');document.getElementById('errorMessage').style.display='block';document.getElementById(missing[0]).scrollIntoView({behavior:'smooth'});return false;}
            document.getElementById('errorMessage').style.display='none';
            return true;
        }
        function generateHoroscope(){
            const data=Object.fromEntries(new FormData(horoscopeForm).entries());
            if(!validateForm(data))return;
            loading.style.display='block';results.style.display='none';generateBtn.disabled=true;
            setTimeout(()=>{
                try{horoscopeData=calculateHoroscope(data);displayHoroscope(horoscopeData);loading.style.display='none';results.style.display='block';generateBtn.disabled=false;results.scrollIntoView({behavior:'smooth'});}catch{alert('Error generating horoscope.');loading.style.display='none';generateBtn.disabled=false;}
            },4000);
        }
        function calculateHoroscope(data){
            const bd=new Date(data.birthDate+'T'+data.birthTime),lat=parseFloat(data.latitude),lng=parseFloat(data.longitude),tz=parseFloat(data.timezone);
            const utc=new Date(bd.getTime()-(tz*3600000)),jd=getJulianDayNumber(utc);
            const planetaryPositions=calculatePlanetaryPositions(jd,lat,lng);
            const houses=calculateHouses(jd,lat,lng),ascendant=houses[1],moonSign=Math.floor(planetaryPositions.moon/30)+1,sunSign=Math.floor(planetaryPositions.sun/30)+1;
            const mn=planetaryPositions.moon%360,nidx=Math.floor((mn*27)/360),nak=nakshatras[nidx],pada=Math.floor(((mn*27)%360)/90)+1;
            const divisional=generateDivisionalCharts(planetaryPositions,data.includeDivisional),predictions=generateDetailedPredictions(planetaryPositions,houses,ascendant,moonSign,sunSign);
            return {personalInfo:data,birthDetails:{date:bd,jd,latitude:lat,longitude:lng,timezone:tz},planetaryPositions,houses,ascendant,moonSign,sunSign,nakshatra:nak,pada,divisionalCharts:divisional,predictions};
        }
        function getJulianDayNumber(date){
            const a=Math.floor((14-(date.getMonth()+1))/12),y=date.getFullYear()+4800-a,m=(date.getMonth()+1)+12*a-3;
            let jd=date.getDate()+Math.floor((153*m+2)/5)+365*y+Math.floor(y/4)-Math.floor(y/100)+Math.floor(y/400)-32045;
            jd+=date.getHours()/24+date.getMinutes()/1440+date.getSeconds()/86400;return jd;
        }
        function calculatePlanetaryPositions(jd,lat,lng){
            const T=(jd-2451545)/36525,positions={};
            const L0=280.46646+36000.76983*T+0.0003032*T*T;positions.sun=(L0%360+360)%360;
            const Lm=218.3164477+481267.88123421*T-0.0015786*T*T;positions.moon=(Lm%360+360)%360;
            positions.mars=(positions.sun+45+Math.random()*60)%360;
            positions.mercury=(positions.sun+Math.random()*30-15)%360;
            positions.jupiter=(positions.sun+Math.random()*180)%360;
            positions.venus=(positions.sun+Math.random()*40-20)%360;
            positions.saturn=(positions.sun+Math.random()*120)%360;
            positions.rahu=Math.random()*360;positions.ketu=(positions.rahu+180)%360;return positions;
        }
        function calculateHouses(jd,lat,lng){
            let asc=Math.random()*360;const houses={};
            for(let i=1;i<=12;i++){houses[i]=Math.floor(((asc+(i-1)*30)%360)/30)+1;}
            return houses;
        }
        function generateDivisionalCharts(planets,inc){
            let charts=[];switch(inc){case'basic':charts=['D1'];break;case'essential':charts=['D1','D9'];break;case'extended':charts=['D1','D9','D10','D12'];break;case'complete':charts=['D1','D9','D10','D12','D16','D20','D24','D27','D30','D40','D45','D60'];}
            let data={};charts.forEach(c=>{data[c]=calculateDivisionalChart(planets,c);});return data;
        }
        function calculateDivisionalChart(planets,cht){
            const divs={},div=parseInt(cht.substring(1));
            Object.keys(planets).forEach(p=>{let deg=planets[p],sign=Math.floor(deg/30)+1,inSign=deg%30,portion=Math.floor(inSign/(30/div));divs[p]=div===1?deg:((sign-1)*div+portion)*(360/(12*div));divs[p]%=360;});
            let houses={},asc=divs.sun||0;for(let i=1;i<=12;i++){houses[i]=Math.floor(((asc+(i-1)*30)%360)/30)+1;}
            return{positions:divs,houses:houses,info:divisionalCharts[cht]};
        }
        function generateDetailedPredictions(pl,hs,asc,moon,son){let out={};out.personality={title:'Personality & Character Analysis',content:'[Personality summary]'};out.career={title:'Career & Professional Life',content:'[Career summary]'};out.health={title:'Health & Wellness',content:'[Health summary]'};out.relationships={title:'Relationships & Marriage',content:'[Relationships summary]'};out.finance={title:'Finance & Wealth',content:'[Finance summary]'};out.education={title:'Education & Learning',content:'[Education summary]'};out.family={title:'Family & Domestic Life',content:'[Family summary]'};out.spiritual={title:'Spiritual Growth & Philosophy',content:'[Spiritual summary]'};return out;}
        function displayInputSummary(d){/* omitted */}
        function displayHoroscope(d){/* omitted */}
        function displayAllCharts(c,o,h){/* omitted */}
        function displayDetailedPredictions(p){/* omitted */}
        function downloadPDF(){/* omitted */}
        function generateNewHoroscope(){horoscopeForm.reset();results.style.display='none';errorMessage.style.display='none';document.querySelectorAll('.error').forEach(el=>el.classList.remove('error'));document.querySelector('.form-container').scrollIntoView({behavior:'smooth'});}
    </script>
</body>
</html>
